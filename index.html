<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>FM Transmitter configuration</title>
    <script type="text/javascript" src="autobahn.min.js"></script>
    <script type="text/javascript" src="serial2ws.js"></script>
  </head>
  <body>
    <table>
      <tr>
        <td>
          <h2>Transmitter Settings</h2>
<!--            <form onsubmit="setSettings()" action="#">-->
          <button id="submit" onclick="setSettings()">Submit</button>
          <form>
            <fieldset id="power_fs" disabled>
              <legend>
                <input type="checkbox" id="power_cb" onclick="cb_f(power_cb,power_fs)">
                Output Power
              </legend>
<!--              <input type="range" id="power" min="0" max="100" value="0">-->
                <input type="number" id="power" min="0" max="100" value="0" step="1">
              %
            </fieldset>
            <fieldset id="freq_fs" disabled>
              <legend>
                <input type="checkbox" id="freq_cb" onclick="cb_f(freq_cb,freq_fs)">
                Frequency
              </legend>
              <input type="number" id="freq" min="87.5" max="108.0" value="100.0" step="0.1">
              MHz
            </fieldset>
            <fieldset id="channels_fs" disabled>
              <legend>
                <input type="checkbox" id="channels_cb" onclick="cb_f(channels_cb,channels_fs)">
                Stereo/Mono
              </legend>
              <table>
                <tr>
                  <td>
                    <input type="radio" id="stereo" name="channels" value="1" checked >Stereo
                  </td>
                </tr>
                <tr>
                  <td>
                    <input type="radio" id="mono" name="channels" value="0" >Mono
                  </td>
                </tr>
              </table>
            </fieldset>
            <fieldset id="DSP_fs" disabled>
              <legend>
                <input type="checkbox" id="DSP_cb" onclick="cb_f(DSP_cb,DSP_fs)">
                Audio Compressor Settings
                </legend>
              <table>
                <tr>
                  <td>
                    Attack
                  </td>
                  <td>
                    <select id="attack" name="attack">
                      <option selected="selected" value="0">1,7</option>
                      <option value="1">3,5</option>
                      <option value="2">6,7</option>
                      <option value="3">13</option>
                      <option value="4">26</option>
                      <option value="5">53</option>
                      <option value="6">106</option>
                      <option value="7">212</option>
                    </select>
                  </td>
                  <td>
                    ms
                  </td>
                </tr>
                <tr>
                  <td>
                    Decay
                  </td>
                  <td>
                    <select id="decay" name="decay">
                      <option value="0">1,7</option>
                      <option value="1">3,5</option>
                      <option value="2">6,7</option>
                      <option value="3">13</option>
                      <option value="4">26</option>
                      <option selected="selected" value="5">53</option>
                      <option value="6">106</option>
                      <option value="7">212</option>
                      <option value="8">425</option>
                      <option value="9">850</option>
                      <option value="10">1700</option>
                    </select>
                  </td>
                  <td>
                    ms
                  </td>
                </tr>
                <tr>
                  <td>
                    Interval
                  </td>
                  <td>
                    <select id="interval" name="interval">
                      <option value="0">1,7</option>
                      <option value="1">3,5</option>
                      <option value="2">6,7</option>
                      <option selected="selected" value="3">13</option>
                      <option value="4">26</option>
                      <option value="5">53</option>
                      <option value="6">106</option>
                    </select>
                  </td>
                  <td>
                    ms
                  </td>
                </tr>
                <tr>
                  <td>
                    Threshold
                  </td>
                  <td>
                    <select id="threshold" name="threshold">
                      <option value="0">0,0</option>
                      <option value="1">-1,5</option>
                      <option value="2">-3,0</option>
                      <option value="3">-4,5</option>
                      <option value="4">-6,0</option>
                      <option value="5">-7,5</option>
                      <option value="6">-9,0</option>
                      <option value="7">-10,5</option>
                      <option value="8">-12,0</option>
                      <option value="9">-13,5</option>
                      <option value="10">-15,0</option>
                      <option value="11">-16,5</option>
                      <option value="12">-18,0</option>
                      <option value="13">-19,5</option>
                      <option value="14">-21,0</option>
                      <option value="15">-22,5</option>
                      <option value="16">-24,0</option>
                      <option value="17">-25,5</option>
                      <option value="18">-27,0</option>
                      <option value="19">-28,5</option>
                      <option value="20">-30,0</option>
                    </select>
                  </td>
                  <td>
                    dB
                  </td>
                </tr>
                <tr>
                  <td>
                    Compression
                  </td>
                  <td>
                    <select id="compression" name="compression">
                      <option value="0">1:1.00</option>
                      <option value="1">1:1.07</option>
                      <option value="2">1:1.14</option>
                      <option value="3">1:1.23</option>
                      <option value="4">1:1.33</option>
                      <option value="5">1:1.45</option>
                      <option value="6">1:1.60</option>
                      <option value="7">1:1.78</option>
                      <option selected="selected" value="8">1:2.00</option>
                      <option value="9">1:2.29</option>
                      <option value="10">1:2.67</option>
                      <option value="11">1:3.20</option>
                      <option value="12">1:4.00</option>
                    </select>
                  </td>
                </tr>
              </table>
            </fieldset>
            <fieldset id="alarm_fs" disabled>
              <legend>
                <input type="checkbox" id="alarm_cb" onclick="cb_f(alarm_cb,alarm_fs)">
                Alarm Levels
              </legend>
              <table>
                <tr>
                  <td>
                    SWR Alarm
                  </td>
                  <td>
                    <select id="swr_alarm" name="swr_alarm">
                      <option value="0">>1/>10</option>
                      <option value="1">>2/>20</option>
                      <option value="2">>3/>30</option>
                      <option value="3">>4/>40</option>
                      <option value="4">>5/>50</option>
                      <option value="5">>6/>60</option>
                      <option selected="selected" value="6">>7/>70</option>
                      <option value="7">>8/>80</option>
                      <option value="8">>9/>90</option>
                      <option value="9">>9.9/>99</option>
                    </select>
                  </td>
                  <td>
                    W/W
                  </td>
                </tr>
                <tr>
                  <td>
                    Current Alarm
                  </td>
                  <td>
                    <select id="current_alarm" name="current_alarm">
                      <option selected="selected" value="0">>2.0</option>
                      <option value="1">>3.0</option>
                      <option value="2">>4.0</option>
                      <option value="3">>5.0</option>
                      <option value="4">>6.0</option>
                      <option value="5">>7.0</option>
                      <option value="6">>8.0</option>
                      <option value="7">>9.0</option>
                      <option value="8">>10.0</option>
                      <option value="9">>11.0</option>
                      <option value="10">>12.0</option>
                      <option value="11">>13.0</option>
                      <option value="12">>14.0</option>
                      <option value="13">>15.0</option>
                      <option value="14">>16.0</option>
                      <option value="15">>17.0</option>
                      <option value="16">>18.0</option>
                      <option value="17">>19.0</option>
                      <option value="18">>20.0</option>
                      <option value="19">>21.0</option>
                      <option value="20">>22.0</option>
                      <option value="21">>23.0</option>
                      <option value="22">>24.0</option>
                      <option value="23">>25.0</option>
                      <option value="24">>26.0</option>
                      <option value="25">>27.0</option>
                      <option value="26">>28.0</option>
                      <option value="27">>29.0</option>
                      <option value="28">>30.0</option>
                    </select>
                  </td>
                  <td>
                    A
                  </td>
                </tr>
                <tr>
                  <td>
                    Temperature Alarm
                  </td>
                  <td>
                    <select id="temp_alarm" name="temp_alarm">
                      <option value="0">40</option>
                      <option value="1">50</option>
                      <option value="2">60</option>
                      <option value="3">65</option>
                      <option selected="selected" value="4">70</option>
                      <option value="5">75</option>
                      <option value="6">80</option>
                      <option value="7">90</option>
                    </select>
                  </td>
                  <td>
                    &deg;C
                  </td>
                </tr>
                <tr>
                  <td>
                    Amplifier Voltage Alarm
                  </td>
                  <td>
                    <select id="Uamp_alarm" name="Uamp_alarm">
                      <option value="0">24</option>
                      <option value="1">26</option>
                      <option value="2">28</option>
                      <option value="3">30</option>
                      <option value="4">32</option>
                      <option value="5">34</option>
                      <option selected="selected" value="6">36</option>
                      <option value="7">38</option>
                      <option value="8">40</option>
                      <option value="9">41</option>
                      <option value="10">42</option>
                      <option value="11">43</option>
                      <option value="12">44</option>
                      <option value="13">45</option>
                      <option value="14">46</option>
                      <option value="15">47</option>
                      <option value="16">48</option>
                      <option value="17">49</option>
                      <option value="18">50</option>
                      <option value="19">51</option>
                      <option value="20">52</option>
                      <option value="21">53</option>
                      <option value="22">54</option>
                      <option value="23">55</option>
                    </select>
                  </td>
                  <td>
                    V
                  </td>
                </tr>
              </table>
            </fieldset>
            <fieldset id="bass_treble_fs" disabled>
              <legend>
                <input type="checkbox" id="bass_treble_cb" onclick="cb_f(bass_treble_cb,bass_treble_fs)">
                Bass and Treble
              </legend>
              <table>
                <tr>
                  <td>
                    Treble
                  </td>
                  <td>
                    <select id="treble" name="treble">
                      <option value="0">-8.0</option>
                      <option value="1">-7.0</option>
                      <option value="2">-6.0</option>
                      <option value="3">-5.0</option>
                      <option value="4">-4.0</option>
                      <option value="5">-3.0</option>
                      <option value="6">-2.0</option>
                      <option value="7">-1.0</option>
                      <option selected="selected" value="8">0.0</option>
                      <option value="9">+1.0</option>
                      <option value="10">+2.0</option>
                      <option value="11">+3.0</option>
                      <option value="12">+4.0</option>
                      <option value="13">+5.0</option>
                      <option value="14">+6.0</option>
                      <option value="15">+7.0</option>
                      <option value="16">+8.0</option>
                    </select>
                  </td>
                  <td>
                    dB
                  </td>
                </tr>
                <tr>
                  <td>
                    Bass
                  </td>
                  <td>
                    <select id="bass" name="bass">
                      <option value="0">-8.0</option>
                      <option value="1">-7.0</option>
                      <option value="2">-6.0</option>
                      <option value="3">-5.0</option>
                      <option value="4">-4.0</option>
                      <option value="5">-3.0</option>
                      <option value="6">-2.0</option>
                      <option value="7">-1.0</option>
                      <option selected="selected" value="8">0.0</option>
                      <option value="9">+1.0</option>
                      <option value="10">+2.0</option>
                      <option value="11">+3.0</option>
                      <option value="12">+4.0</option>
                      <option value="13">+5.0</option>
                      <option value="14">+6.0</option>
                      <option value="15">+7.0</option>
                      <option value="16">+8.0</option>
                    </select>
                  </td>
                  <td>
                    dB
                  </td>
                </tr>
              </table>
            </fieldset>
            <fieldset id="audio_fs" disabled>
              <legend>
                <input type="checkbox" id="audio_cb" onclick="cb_f(audio_cb,audio_fs)">
                Audio Input Level
              </legend>
              <table>
                <tr>
                  <td>
                    Left Gain
                  </td>
                  <td>
                    <select id="left_gain" name="left_gain">
                      <option value="0">-6.0</option>
                      <option value="1">-5.5</option>
                      <option value="2">-5.0</option>
                      <option value="3">-4.5</option>
                      <option value="4">-4.0</option>
                      <option value="5">-3.5</option>
                      <option value="6">-3.0</option>
                      <option value="7">-2.5</option>
                      <option value="8">-2.0</option>
                      <option value="9">-1.5</option>
                      <option value="10">-1.0</option>
                      <option value="11">-0.5</option>
                      <option selected="selected" value="12">0.0</option>
                      <option value="13">+0.5</option>
                      <option value="14">+1.0</option>
                      <option value="15">+1.5</option>
                      <option value="16">+2.0</option>
                      <option value="17">+2.5</option>
                      <option value="18">+3.0</option>
                      <option value="19">+3.5</option>
                      <option value="20">+4.0</option>
                      <option value="21">+4.5</option>
                      <option value="22">+5.0</option>
                      <option value="23">+5.5</option>
                      <option value="24">+6.0</option>
                      <option value="25">+8.0</option>
                    </select>
                  </td>
                  <td>
                    dB
                  </td>
                </tr>
                <tr>
                  <td>
                    Right Gain
                  </td>
                  <td>
                    <select id="right_gain" name="right_gain">
                      <option value="0">-6.0</option>
                      <option value="1">-5.5</option>
                      <option value="2">-5.0</option>
                      <option value="3">-4.5</option>
                      <option value="4">-4.0</option>
                      <option value="5">-3.5</option>
                      <option value="6">-3.0</option>
                      <option value="7">-2.5</option>
                      <option value="8">-2.0</option>
                      <option value="9">-1.5</option>
                      <option value="10">-1.0</option>
                      <option value="11">-0.5</option>
                      <option selected="selected" value="12">0.0</option>
                      <option value="13">+0.5</option>
                      <option value="14">+1.0</option>
                      <option value="15">+1.5</option>
                      <option value="16">+2.0</option>
                      <option value="17">+2.5</option>
                      <option value="18">+3.0</option>
                      <option value="19">+3.5</option>
                      <option value="20">+4.0</option>
                      <option value="21">+4.5</option>
                      <option value="22">+5.0</option>
                      <option value="23">+5.5</option>
                      <option value="24">+6.0</option>
                      <option value="25">+8.0</option>
                    </select>
                  </td>
                  <td>
                    dB
                  </td>
                </tr>
              </table>
            </fieldset>
<!--            <input type="submit">-->
          </form>
        </td>
        <td>
          <h2>Transmitter Status</h2>
          <div id="statusline"></div>
          <input type="checkbox" id="autoread" onclick="autoReadTx()">Auto Read Tx
          <button id="readTx" onclick="readTX()">Read Tx</button>
          <table border="1">
            <tr>
              <td id="ampTemp_id">Amplifier Temperature Alarm</td>
              <td id="SWR_id">SWR Alarm</td>
            </tr>
            <tr>
              <td id="excTemp_id">Exciter Temperature Alarm</td>
              <td id="I_id">Current Alarm</td>
            </tr>
            <tr>
              <td id="ampVoltage_id">Voltage Alarm</td>
              <td id="standby_id">Standby</td>
            </tr>
            <br/>
            <p id="AlarmCode_id"></p>
          </table>
          <table>
            <tr>
              <td>
                Alarm Code
              </td>
              <td>
                <span id="AlarmCode">-</span>
              </td>
            </tr>
            <tr>
              <td>
                Output Power
              </td>
              <td>
                <span id="Pfwd">-</span>
              </td>
              <td>
                W
              </td>
            </tr>
            <tr>
              <td>
                Reflected Power
              </td>
              <td>
                <span id="ref">-</span>
              </td>
              <td>
                W
              </td>
            </tr>
            <tr>
              <td>
                Exciter Temperature
              </td>
              <td>
                <span id="Texc">-</span>
              </td>
              <td>
                &deg;C
              </td>
            </tr>
            <tr>
              <td>
                Amplifier Temperature
              </td>
              <td>
                <span id="Tamp">-</span>
              </td>
              <td>
                &deg;C
              </td>
            </tr>
            <tr>
              <td>
                Exciter Voltage
              </td>
              <td>
                <span id="Uexc">-</span>
              </td>
              <td>
                V
              </td>
            </tr>
            <tr>
              <td>
                Amplifier Voltage
              </td>
              <td>
                <span id="Uamp">-</span>
              </td>
              <td>
                V
              </td>
            </tr>
            <tr>
              <td>
                Audio
              </td>
              <td>
                <span id="audio">-</span>
              </td>
            </tr>
            <tr>
              <td>
                Exciter Current
              </td>
              <td>
                <span id="Iexc">-</span>
              </td>
              <td>
                A
              </td>
            </tr>
            <tr>
              <td>
                Amplifier Current
              </td>
              <td>
                <span id="Iamp">-</span>
              </td>
              <td>
                A
              </td>
            </tr>
            <tr>
              <td>
                Uptime
              </td>
              <td>
                <span id="Uptime">-</span>
              </td>
            </tr>
            <tr>
              <td>
                Frequency
              </td>
              <td>
                <span id="Freq">-</span>
              </td>
              <td>
                MHz
              </td>
            </tr>
            <tr>
              <td>
                Firmware
              </td>
              <td>
                <span id="Firmware">-</span>
              </td>
            </tr>
            <tr>
              <td>
                Power Limit
              </td>
              <td>
                <span id="PowerLimit">-</span>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>
